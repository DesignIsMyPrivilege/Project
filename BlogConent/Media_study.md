# 媒体学习

## [视频编码](https://www.cnblogs.com/zhangming-blog/articles/6000518.html)之I帧、P帧、B帧

***

视频是利用人眼视觉暂留的原理，通过播放一系列的图片，使人眼产生运动的感觉。单纯传输视频画面，视频量非常大，对现有的网络和存储来说是不可接受的。为了能够使视频便于传输和存储，人们发现视频有大量重复的信息，如果将重复信息在发送端去掉，在接收端恢复出来，这样就大大减少了视频数据的文件，因此有了H.264视频压缩标准。在H.264压缩标准中I帧、P帧、B帧用于表示传输的视频画面。

### I帧

I帧又称帧内编码帧，是一种自带全部信息的独立帧，无需参考其他图像便可独立进行解码，可以简单理解为一张静态画面。视频序列中的第一个帧始终都是I帧，因为它是**关键帧**。

### P帧

P帧又称**帧间预测编码帧**，需要参考前面的I帧才能进行编码。表示的是当前帧画面与前一帧（前一帧可能是I帧也可能是P帧）的差别。解码时需要用之前缓存的画面叠加上本帧定义的差别，生成最终画面。与I帧相比，P帧通常占用更少的数据位，但不足是，由于P帧对前面的P和I参考帧有着复杂的依耐性，因此对传输错误非常敏感。

### B帧

B帧又称**双向预测编码帧**，也就是B帧记录的是本帧与前后帧的差别。也就是说要解码B帧，不仅要取得之前的缓存画面，还要解码之后的画面，通过前后画面的与本帧数据的叠加取得最终的画面。B帧压缩率高，但是对解码性能要求较高。

## 图像数据采集格式

***

### YUV简介

YUV：Y表示明亮度，也就是灰阶值；U[^u]表示色彩；V[^v]表示饱和度。这种设计能够解决彩色电视机和黑白电视机的兼容问题。

YUV分为planar和packed两大类

1. planner：先连续存储所有像素点的Y，紧接着存储所有像素点的U，随后是所有像素点的V。
2. packed：每个像素点是YUV是连续交叉存储。

| 存储格式 |         描述          |      位      |   字节    |
| :------: | :-------------------: | :----------: | :-------: |
|  YUV444  |  每个Y对应一组UV分量  | 8+8+8=24bits |  3个字节  |
|  YUV422  | 每两个Y共用一组UV分量 | 8+4+4=16bits |  2个字节  |
|  YUV420  | 每四个Y共用一组UV分量 | 8+2+2=12bits | 1.5个字节 |

#### YUV420

YUV420分为YUV420p、YUV420sp两种格式

![](/photo/Yuv420.png)

1. YUV420p为planer平面模式，YUV分别在不同平面，也就是三个平面
   * YUV420p又分为YU12、YV12两种形式

	> YU12是先存储Y，再存储U，最后存储V：YYYUUUVVV
	>
	> YV12是先存储Y，再存储V，最后存储U：YYYVVVUUU

2. YUV420sp又叫bi-planer或two-planer双平面，Y一个平面，UV在一个平面交叉存储
   * YUV420sp又分为NV12、NV21两种形式

	> NV12是先存储Y，再UV交替存储：YYYUVUVUV
	>
	> NV21是先存储Y，再VU交替存储：YYYVUVUVU

[^u]:Chrominance
[^v]:Chroma

***

